from datetime import datetime
import sqlite3

def log_user_activity(user_id, activity_type, suspicious=False):
    conn = sqlite3.connect('database.db')
    cursor = conn.cursor()

    cursor.execute('''
    INSERT INTO user_activity_logs (user_id, activity_type, timestamp, suspicious)
    VALUES (?, ?, ?, ?)
    ''', (user_id, activity_type, datetime.now(), suspicious))

    conn.commit()
    conn.close()

def failed_login(username):
    conn = sqlite3.connect('database.db')
    cursor = conn.cursor()

    cursor.execute('SELECT * FROM users WHERE username = ?', (username,))
    user = cursor.fetchone()

    if user:
        log_user_activity(user[0], 'failed login', suspicious=True)  
    conn.close()
